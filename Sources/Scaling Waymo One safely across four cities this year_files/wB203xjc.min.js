import{i as p,s as G,x as X}from"./chunks/Cvr5WbqH.min.js";import{o as J}from"./chunks/BZCoTZ8E.min.js";import{c as Z}from"./chunks/0wbrCakR.min.js";import{a as Q}from"./chunks/D9SJKtsg.min.js";import"./chunks/CF8sV3Lr.min.js";import"./chunks/C6NDGylb.min.js";function ee(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)||oe()}function te(){return/Android/i.test(navigator.userAgent)}function oe(){return navigator.userAgent.toLowerCase().indexOf("macintosh")!==-1&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>2}var ie=class{constructor(){this.loadedScripts={},this.disposed=!1}load(e,t){const o=this.loadedScripts[e];if(o)return o;const i=new Promise((a,n)=>{if(t.test()){a();return}this.renderScriptTag(e,t);const l=Date.now(),f=t.timeout||5e3,u=()=>{if(this.disposed){n("script loader is disposed");return}if(t.test()){a();return}if(Date.now()-l>f){n(`failed to load ${e} due to timeout`);return}window.requestAnimationFrame(u)};window.requestAnimationFrame(u)});return this.loadedScripts[e]=i,i.catch(a=>{console.error(`failed to load ${e}`),console.error(a),delete this.loadedScripts[e]}),i}renderScriptTag(e,t){const o=document.createElement("script");if(t?.attrs)for(const i in t.attrs){const a=t.attrs[i];o.setAttribute(i,a)}o.src=e,document.body.appendChild(o)}renderDom(e){this.renderScriptTag(e)}dispose(){this.loadedScripts={},this.disposed=!0}},ae="https://www.youtube.com/iframe_api?trustedtypes=1",ne={namespace:"degu-youtube-modal",useHandlerOnMobile:!0,transitionDuration:300,parentSelector:"body",playerVars:{autohide:1,autoplay:1,fs:1,modestbranding:1,rel:0,showinfo:0,iv_load_policy:3},scriptLoader:new ie},x={ENTER:"Enter",ESC:"Escape",SPACE:" "},re=class{constructor(e){this.isVisible=!1,this.config=Object.assign({},ne,e),this.container=document.querySelector(this.config.parentSelector);const t=this.createDom("div",this.config.namespace);t.setAttribute("aria-modal","true"),t.setAttribute("role","dialog");const o=this.createDom("button",`${this.config.namespace}__x`);o.setAttribute("aria-label","Close video player"),o.setAttribute("tabindex","0"),o.addEventListener("click",()=>{this.setActive(!1)}),this.closeEl=o;const i=this.createDom("div",`${this.config.namespace}__attribution`);this.attributionEl=i;const a=this.createDom("div",`${this.config.namespace}__player`);this.playerEl=a;const n=this.createDom("div",`${this.config.namespace}__mask`);t.appendChild(o),t.appendChild(i),t.appendChild(a),t.appendChild(n),this.modalEl=t,this.container.appendChild(t),document.addEventListener("click",this.handleEvent.bind(this)),document.addEventListener("keydown",this.handleKeyboardEvent.bind(this))}async play(e,t){const o=t||{};if(this.config.useHandlerOnMobile&&(ee()||te())){let a=`https://m.youtube.com/watch?v=${e}`;o.startTime&&(a=`${a}&t=${o.startTime}s`),window.location.href=a;return}await this.config.scriptLoader.load(ae,{test:()=>window.YT&&window.YT.loaded===1}),o.attribution&&(this.attributionEl.textContent=o.attribution);const i=o.orientation||"landscape";if(this.modalEl.setAttribute("data-orientation",i),this.setActive(!0),this.player){if(e===this.activeVideoId)return;this.player.loadVideoById(e,o.startTime||0,"large"),this.activeVideoId=e}else{const a=Object.assign({},this.config.playerVars);o.startTime&&(a.start=o.startTime),a.origin=location.protocol+"//"+location.host;const n={videoId:e,playerVars:a,events:{onReady:l=>{l.target.playVideo()}}};this.player=new YT.Player(this.playerEl,n)}}getPlayOptionsFromAttrs(e){const t={},o=+(e.getAttribute(`data-${this.config.namespace}-video-start-seconds`)||0);o>0&&(t.startTime=o);const i=e.getAttribute(`data-${this.config.namespace}-attribution`);i&&(t.attribution=i);const a=e.getAttribute(`data-${this.config.namespace}-orientation`);return a&&(t.orientation=a),t}setActive(e){e?(this.lastScrollY=window.pageYOffset,this.lastFocusedEl=document.activeElement,window.setTimeout(()=>{this.closeEl.focus(),this.config.onModalOpen&&this.config.onModalOpen(this)},this.config.transitionDuration+100)):window.setTimeout(()=>{this.lastFocusedEl&&(this.lastFocusedEl.focus(),this.lastFocusedEl=void 0),window.scrollTo({left:0,top:this.lastScrollY}),this.config.onModalClose&&this.config.onModalClose(this)},this.config.transitionDuration+100),this.setVisible(e)}getPlayer(){return this.player}dispose(){document.removeEventListener("click",this.handleEvent.bind(this)),document.removeEventListener("keydown",this.handleKeyboardEvent.bind(this)),this.modalEl&&this.container.removeChild(this.modalEl)}createDom(e,t,...o){const i=document.createElement(e);return i.className=t,o&&o.length&&o.forEach(a=>i.appendChild(a)),i}handleEvent(e){let t=e.target;for(;t;){const o=`data-${this.config.namespace}-video-id`,i=t.getAttribute(o);if(i){e.preventDefault();const a=this.getPlayOptionsFromAttrs(t);this.play(i,a);return}t=t.parentElement}}handleKeyboardEvent(e){if(this.isVisible){if(!this.player)return;e.key===x.ESC?this.setActive(!1):e.key===x.SPACE&&(this.player.getPlayerState()===YT.PlayerState.PLAYING?this.player.pauseVideo():this.player.playVideo())}else(e.key===x.ENTER||e.key===x.SPACE)&&this.handleEvent(e)}setVisible(e){window.setTimeout(()=>{this.player&&(e?this.player.getPlayerState()!==YT.PlayerState.PLAYING&&this.player.playVideo():this.player.pauseVideo())},100),window.setTimeout(()=>{this.modalEl.classList.toggle(`${this.config.namespace}--enabled`,e)},e?0:this.config.transitionDuration),window.setTimeout(()=>{this.modalEl.classList.toggle(`${this.config.namespace}--visible`,e),this.isVisible=e},e?this.config.transitionDuration:0)}};function U(e){return new Promise(function(t,o,i){(i=new XMLHttpRequest).open("GET",e,i.withCredentials=!0),i.onload=function(){i.status===200?t():o()},i.send()})}var A,le=(A=document.createElement("link")).relList&&A.relList.supports&&A.relList.supports("prefetch")?function(e){return new Promise(function(t,o,i){(i=document.createElement("link")).rel="prefetch",i.href=e,i.onload=t,i.onerror=o,document.head.appendChild(i)})}:U,se=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},k=new Set,S=new Set,L=!1;function B(e){if(e){if(e.saveData)return new Error("Save-Data is enabled");if(/2g/.test(e.effectiveType))return new Error("network conditions are poor")}return!0}function de(e){if(e||(e={}),window.IntersectionObserver){var t=function(m){m=m||1;var d=[],h=0;function c(){h<m&&d.length>0&&(d.shift()(),h++)}return[function(b){d.push(b)>1||c()},function(){h--,c()}]}(e.throttle||1/0),o=t[0],i=t[1],a=e.limit||1/0,n=e.origins||[location.hostname],l=e.ignores||[],f=e.delay||0,u=[],_=e.timeoutFn||se,E=typeof e.hrefFn=="function"&&e.hrefFn,O=e.prerender||!1;L=e.prerenderAndPrefetch||!1;var T=new IntersectionObserver(function(m){m.forEach(function(d){if(d.isIntersecting)u.push((d=d.target).href),function(c,b){b?setTimeout(c,b):c()}(function(){u.indexOf(d.href)!==-1&&(T.unobserve(d),(L||O)&&S.size<1?ce(E?E(d):d.href).catch(function(c){if(!e.onError)throw c;e.onError(c)}):k.size<a&&!O&&o(function(){V(E?E(d):d.href,e.priority).then(i).catch(function(c){i(),e.onError&&e.onError(c)})}))},f);else{var h=u.indexOf((d=d.target).href);h>-1&&u.splice(h)}})},{threshold:e.threshold||0});return _(function(){(e.el||document).querySelectorAll("a").forEach(function(m){n.length&&!n.includes(m.hostname)||function d(h,c){return Array.isArray(c)?c.some(function(b){return d(h,b)}):(c.test||c).call(c,h.href,h)}(m,l)||T.observe(m)})},{timeout:e.timeout||2e3}),function(){k.clear(),T.disconnect()}}}function V(e,t,o){var i=B(navigator.connection);return i instanceof Error?Promise.reject(new Error("Cannot prefetch, "+i.message)):(S.size>0&&!L&&console.warn("[Warning] You are using both prefetching and prerendering on the same document"),Promise.all([].concat(e).map(function(a){if(!k.has(a))return k.add(a),(t?function(n){return window.fetch?fetch(n,{credentials:"include"}):U(n)}:le)(new URL(a,location.href).toString())})))}function ce(e,t){var o=B(navigator.connection);if(o instanceof Error)return Promise.reject(new Error("Cannot prerender, "+o.message));if(!HTMLScriptElement.supports("speculationrules"))return V(e),Promise.reject(new Error("This browser does not support the speculation rules API. Falling back to prefetch."));if(document.querySelector('script[type="speculationrules"]'))return Promise.reject(new Error("Speculation Rules is already defined and cannot be altered."));for(var i=0,a=[].concat(e);i<a.length;i+=1){var n=a[i];if(window.location.origin!==new URL(n,window.location.href).origin)return Promise.reject(new Error("Only same origin URLs are allowed: "+n));S.add(n)}k.size>0&&!L&&console.warn("[Warning] You are using both prefetching and prerendering on the same document");var l=function(f){var u=document.createElement("script");u.type="speculationrules",u.text='{"prerender":[{"source": "list","urls": ["'+Array.from(f).join('","')+'"]}]}';try{document.head.appendChild(u)}catch(_){return _}return!0}(S);return l===!0?Promise.resolve():Promise.reject(l)}var w=window.CustomEvent;(!w||typeof w=="object")&&(w=function(t,o){o=o||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!!o.bubbles,!!o.cancelable,o.detail||null),i},w.prototype=window.Event.prototype);function z(e,t){var o="on"+t.type.toLowerCase();return typeof e[o]=="function"&&e[o](t),e.dispatchEvent(t)}function ue(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),o=function(i,a){return!(t[i]===void 0||t[i]===a)};if(t.opacity<1||o("zIndex","auto")||o("transform","none")||o("mixBlendMode","normal")||o("filter","none")||o("perspective","none")||t.isolation==="isolate"||t.position==="fixed"||t.webkitOverflowScrolling==="touch")return!0;e=e.parentElement}return!1}function v(e){for(;e;){if(e.localName==="dialog")return e;e.parentElement?e=e.parentElement:e.parentNode?e=e.parentNode.host:e=null}return null}function K(e){for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;e&&e.blur&&e!==document.body&&e.blur()}function fe(e,t){for(var o=0;o<e.length;++o)if(e[o]===t)return!0;return!1}function C(e){return!e||!e.hasAttribute("method")?!1:e.getAttribute("method").toLowerCase()==="dialog"}function Y(e){var t=["button","input","keygen","select","textarea"],o=t.map(function(l){return l+":not([disabled])"});o.push('[tabindex]:not([disabled]):not([tabindex=""])');var i=e.querySelector(o.join(", "));if(!i&&"attachShadow"in Element.prototype)for(var a=e.querySelectorAll("*"),n=0;n<a.length&&!(a[n].tagName&&a[n].shadowRoot&&(i=Y(a[n].shadowRoot),i));n++);return i}function $(e){return e.isConnected||document.body.contains(e)}function j(e){if(e.submitter)return e.submitter;var t=e.target;if(!(t instanceof HTMLFormElement))return null;var o=r.formSubmitter;if(!o){var i=e.target,a="getRootNode"in i&&i.getRootNode()||document;o=a.activeElement}return!o||o.form!==t?null:o}function he(e){if(!e.defaultPrevented){var t=e.target,o=r.imagemapUseValue,i=j(e);o===null&&i&&(o=i.value);var a=v(t);if(a){var n=i&&i.getAttribute("formmethod")||t.getAttribute("method");n==="dialog"&&(e.preventDefault(),o!=null?a.close(o):a.close())}}}function W(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),e.addEventListener("submit",he,!1),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal.bind(this));t.observe(e,{attributes:!0,attributeFilter:["open"]})}else{var o=!1,i=function(){o?this.downgradeModal():this.maybeHideModal(),o=!1}.bind(this),a,n=function(l){if(l.target===e){var f="DOMNodeRemoved";o|=l.type.substr(0,f.length)===f,window.clearTimeout(a),a=window.setTimeout(i,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(l){e.addEventListener(l,n)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}W.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&$(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),r.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropMouseEvent_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var o=document.createEvent("MouseEvents");o.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(o),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),e||(e=Y(this.dialog_)),K(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!$(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!r.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");ue(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,r.needsCentering(this.dialog_)?(r.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),e!==void 0&&(this.dialog_.returnValue=e);var t=new w("close",{bubbles:!1,cancelable:!1});z(this.dialog_,t)}};var r={};r.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,o=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,o)+"px"};r.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var o=document.styleSheets[t],i=null;try{i=o.cssRules}catch{}if(i)for(var a=0;a<i.length;++a){var n=i[a],l=null;try{l=document.querySelectorAll(n.selectorText)}catch{}if(!(!l||!fe(l,e))){var f=n.style.getPropertyValue("top"),u=n.style.getPropertyValue("bottom");if(f&&f!=="auto"||u&&u!=="auto")return!0}}}return!1};r.needsCentering=function(e){var t=window.getComputedStyle(e);return t.position!=="absolute"||e.style.top!=="auto"&&e.style.top!==""||e.style.bottom!=="auto"&&e.style.bottom!==""?!1:!r.isInlinePositionSetByStylesheet(e)};r.forceRegisterDialog=function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),e.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new W(e)};r.registerDialog=function(e){e.showModal||r.forceRegisterDialog(e)};r.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var o=[];t.forEach(function(i){for(var a=0,n;n=i.removedNodes[a];++a){if(n instanceof Element)n.localName==="dialog"&&o.push(n);else continue;o=o.concat(n.querySelectorAll("dialog"))}}),o.length&&e(o)}))};r.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};r.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()};r.DialogManager.prototype.updateStacking=function(){for(var e=this.zIndexHigh_,t=0,o;o=this.pendingDialogStack[t];++t)o.updateZIndex(--e,--e),t===0&&(this.overlay.style.zIndex=--e);var i=this.pendingDialogStack[0];if(i){var a=i.dialog.parentNode||document.body;a.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};r.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=v(e);){for(var t=0,o;o=this.pendingDialogStack[t];++t)if(o.dialog===e)return t===0;e=e.parentElement}return!1};r.DialogManager.prototype.handleFocus_=function(e){var t=e.composedPath?e.composedPath()[0]:e.target;if(!this.containedByTopDialog_(t)&&document.activeElement!==document.documentElement&&(e.preventDefault(),e.stopPropagation(),K(t),this.forwardTab_!==void 0)){var o=this.pendingDialogStack[0],i=o.dialog,a=i.compareDocumentPosition(t);return a&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?o.focus_():t!==document.documentElement&&document.documentElement.focus()),!1}};r.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,e.keyCode===27){e.preventDefault(),e.stopPropagation();var t=new w("cancel",{bubbles:!1,cancelable:!0}),o=this.pendingDialogStack[0];o&&z(o.dialog,t)&&o.dialog.close()}else e.keyCode===9&&(this.forwardTab_=!e.shiftKey)};r.DialogManager.prototype.checkDOM_=function(e){var t=this.pendingDialogStack.slice();t.forEach(function(o){e.indexOf(o.dialog)!==-1?o.downgradeModal():o.maybeHideModal()})};r.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=t?!1:(this.pendingDialogStack.unshift(e)===1&&this.blockDocument(),this.updateStacking(),!0)};r.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);t!==-1&&(this.pendingDialogStack.splice(t,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())};r.dm=new r.DialogManager;r.formSubmitter=null;r.imagemapUseValue=null;if(window.HTMLDialogElement===void 0){var N=document.createElement("form");if(N.setAttribute("method","dialog"),N.method!=="dialog"){var y=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(y){var me=y.get;y.get=function(){return C(this)?"dialog":me.call(this)};var pe=y.set;y.set=function(e){return typeof e=="string"&&e.toLowerCase()==="dialog"?this.setAttribute("method",e):pe.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",y)}}document.addEventListener("click",function(e){if(r.formSubmitter=null,r.imagemapUseValue=null,!e.defaultPrevented){var t=e.target;if("composedPath"in e){var o=e.composedPath();t=o.shift()||t}if(!(!t||!C(t.form))){var i=t.type==="submit"&&["button","input"].indexOf(t.localName)>-1;if(!i){if(!(t.localName==="input"&&t.type==="image"))return;r.imagemapUseValue=e.offsetX+","+e.offsetY}var a=v(t);a&&(r.formSubmitter=t)}}},!1),document.addEventListener("submit",function(e){var t=e.target,o=v(t);if(!o){var i=j(e),a=i&&i.getAttribute("formmethod")||t.getAttribute("method");a==="dialog"&&e.preventDefault()}});var ge=HTMLFormElement.prototype.submit,_e=function(){if(!C(this))return ge.call(this);var e=v(this);e&&e.close()};HTMLFormElement.prototype.submit=_e}const F="waymo-share-my-data",H="#do-not-track",M=p`
  padding: 0;
  font-family: inherit;
  font-size: inherit;
  color: inherit;
  cursor: pointer;
  background: none;
  border: 0;
`,be=p`
  position: absolute;
  left: -200vw;
  width: 1px;
  height: 1px;
  overflow: hidden;
`,D=p`#0077ff`,P=p`#00e89d`,I=p`#cdcdcd`,ye=p`#23233c`,we=p`700px`,ve=p`900px`,ke=()=>{window.autotrack={trackEvent:()=>null}};class Ee extends G{modal;toggle;static properties={closeIconUrl:{attribute:"close-icon-url"},closeButtonAlt:{attribute:"close-button-alt"},headerIconUrl:{attribute:"header-icon-url"},headerTitle:{attribute:"header-title"},headerSubtitle:{attribute:"header-subtitle"},formTitle:{attribute:"form-title"},formToggleTitle:{attribute:"form-toggle-title"},formToggleLabelOn:{attribute:"form-toggle-label-on"},formToggleLabelOff:{attribute:"form-toggle-label-off"},formToggleHelp:{attribute:"form-toggle-help"},formAlwaysTitle:{attribute:"form-always-title"},formAlwaysLabel:{attribute:"form-always-label"},formAlwaysHelp:{attribute:"form-always-help"},formSubmit:{attribute:"form-submit"},analyticsEventLabel:{attribute:"analytics-event-label"}};static styles=p`
    :host {
      display: block;
    }

    * {
      box-sizing: border-box;
    }

    .toggle-modal {
      ${M}
      position: relative;
      display: block;
      max-width: 100%;
      text-align: left;
    }
    @media (min-width: ${ve}) {
      .toggle-modal {
        margin: 0 auto;
      }
    }

    /* Ensure the touch-target has a minimum size */
    .toggle-modal::before {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      min-width: 48px;
      min-height: 48px;
      transform: translate(-50%, -50%);
      content: '';
    }

    .modal {
      top: 50%;
      left: 50%;
      width: 90%;
      max-height: 80vh;
      padding: 10px 48px 80px;
      margin: 0;
      transform: translate(-50%, -50%);
      overflow-y: auto;
      color: ${ye};
      background-color: #fff;
      border: none;
    }
    @media (min-width: ${we}) {
      .modal {
        width: 100%;
        max-width: 628px;
      }
    }

    .modal::backdrop,
    .modal + .backdrop {
      background-color: rgba(0, 0, 0, 0.5);
    }

    .modal__close {
      ${M}
      display: block;
      margin-right: -26px;
      margin-left: auto;
      outline: 0px solid transparent;
      transition: outline 0.15s;
    }
    .modal__close:focus-visible {
      outline: 3px solid ${P};
    }

    .modal__header__title {
      margin-top: 36px;
      margin-bottom: 0;
      font-size: 40px;
      font-weight: 400;
      line-height: 44px;
      letter-spacing: -1.2px;
    }

    .modal__header__subtitle {
      margin-top: 24px;
      font-size: 16px;
      font-weight: 500;
      line-height: 24px;
      letter-spacing: -0.3199999928474426px;
    }

    .modal__header__body {
      margin-top: 16px;
      font-size: 16px;
      font-weight: 400;
      line-height: 24px;
      letter-spacing: -0.3199999928474426px;
    }

    .modal__form__title {
      margin-top: 36px;
      margin-bottom: 0;
      font-size: 24px;
      font-weight: 400;
      line-height: 28px;
      letter-spacing: -0.9599999785423279px;
    }

    .modal__form__fields {
      display: block;
      padding: 0;
      margin: 0;
      list-style-type: none;
    }

    .modal__form__field {
      display: grid;
      align-items: center;
      grid: 'title' auto 'input' auto 'help' 1fr / 1fr;
      grid-gap: 12px 16px;
      justify-items: start;
      width: 100%;
      margin-top: 36px;
    }
    @media (min-width: 400px) {
      .modal__form__field {
        grid: 'title input' 'help help' / 1fr auto;
        justify-items: stretch;
      }
    }

    .modal__form__field__title {
      grid-area: title;
      margin: 0;
      font-size: 16px;
      line-height: 24px;
      letter-spacing: -0.3199999928474426px;
    }

    .modal__form__field__input {
      grid-area: input;
      font-size: 16px;
      line-height: 24px;
      letter-spacing: -0.3199999928474426px;
    }

    .modal__form__field__label {
      display: flex;
      width: 100%;
      justify-content: flex-end;
      column-gap: 12px;
      align-items: center;
      font-weight: bold;
    }

    .modal__form__field__label__on {
      font-weight: 400;
      display: none;
    }
    .modal__form__field__label__off {
      font-weight: 400;
    }

    .modal__form__field__checkbox:checked
      ~ .modal__form__field__label
      > .modal__form__field__label__on {
      display: inline-block;
    }
    .modal__form__field__checkbox:checked
      ~ .modal__form__field__label
      > .modal__form__field__label__off {
      display: none;
    }

    .modal__form__field__checkbox {
      ${be}
    }

    .modal__form__field__fake-checkbox {
      width: 40px;
      height: 24px;
      background-color: ${I};
      border: 2px solid ${I};
      border-radius: 2000px;
      cursor: pointer;
      transition: background-color 0.1s, border 0.1s, outline 0.15s;
      outline: 0px solid transparent;
    }

    .modal__form__field__checkbox:focus-visible
      ~ .modal__form__field__label
      > .modal__form__field__fake-checkbox {
      outline: 3px solid ${P};
    }

    .modal__form__field__fake-checkbox::before {
      display: block;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      transform: translateX(0);
      background-color: #fff;
      transition: background-color 0.1s, transform 0.1s;
      content: '';
    }

    .modal__form__field__checkbox:checked
      ~ .modal__form__field__label
      > .modal__form__field__fake-checkbox {
      background-color: ${D};
      border: 2px solid ${D};
    }

    .modal__form__field__checkbox:checked
      ~ .modal__form__field__label
      > .modal__form__field__fake-checkbox::before {
      transform: translateX(16px);
    }

    .modal__form__field__help {
      grid-area: help;
      margin: 0;
      font-size: 14px;
      line-height: 17px;
      letter-spacing: -0.3199999928474426px;
    }

    .modal__form__submit {
      ${M}
      padding: 13px 31px;
      margin-top: 72px;
      color: #fff;
      line-height: 24px;
      background-color: ${D};
      border-radius: 3px;
      outline: 0px solid transparent;
      transition: outline 0.15s;
    }
    .modal__form__submit:focus-visible {
      outline: 3px solid ${P};
    }
  `;constructor(){super()}connectedCallback(){super.connectedCallback(),this.init()}async init(){this.boundHandleKeyUp=this.handleKeyUp.bind(this),this.boundHandleClick=this.handleClick.bind(this);const t=localStorage.getItem(F);t&&t==="false"&&ke(),await this.updateComplete,this.modal=this.renderRoot.querySelector("dialog"),this.modal&&r.registerDialog(this.modal),this.toggle=this.renderRoot.querySelector(".modal__form__field__checkbox"),t&&(this.toggle.checked=t==="true"),(!t||t==="true")&&this.loadTrackingScripts(),this.openModalWithUrlParams()}openModalWithUrlParams(){const t=()=>{window.location.hash===H&&(this.scrollIntoView(),this.openModal())};t(),window.addEventListener("hashchange",t)}render(){return X`
      <div class="no-tracking">
        <button type="button" class="toggle-modal" @click=${this.openModal}>
          <slot></slot>
        </button>

        <dialog class="modal">
          <button
            class="modal__close"
            @click=${this.closeModal}
            aria-label=${this.closeButtonAlt}
          >
            <img
              class="modal__close__icon"
              alt=""
              src=${this.closeIconUrl}
              width="48px"
              height="48px"
            />
          </button>

          <div class="modal__header">
            <img
              class="modal__header__icon"
              alt=""
              role="presentation"
              src=${this.headerIconUrl}
              width="48px"
              height="48px"
            />
            <h2 class="modal__header__title">${this.headerTitle}</h2>
            <div class="modal__header__subtitle">
              ${J(this.headerSubtitle)}
            </div>
            <div class="modal__header__body">
              <slot name="header-body"></slot>
            </div>
          </div>

          <form class="modal__form">
            <h3 class="modal__form__title">${this.formTitle}</h3>
            <ul class="modal__form__fields">
              <li class="modal__form__field">
                <p class="modal__form__field__title">${this.formToggleTitle}</p>
                <div class="modal__form__field__input">
                  <input
                    class="modal__form__field__checkbox"
                    id="form-toggle"
                    type="checkbox"
                    checked
                  />
                  <label class="modal__form__field__label" for="form-toggle">
                    <span class="modal__form__field__label__on">
                      ${this.formToggleLabelOn}
                    </span>
                    <span class="modal__form__field__label__off">
                      ${this.formToggleLabelOff}
                    </span>
                    <div class="modal__form__field__fake-checkbox"></div>
                  </label>
                </div>
                <p class="modal__form__field__help">${this.formToggleHelp}</p>
              </li>
              <li class="modal__form__field">
                <p class="modal__form__field__title">${this.formAlwaysTitle}</p>
                <div class="modal__form__field__input">
                  <label class="modal__form__field__label">
                    ${this.formAlwaysLabel}
                  </label>
                </div>
                <p class="modal__form__field__help">${this.formAlwaysHelp}</p>
              </li>
            </ul>
            <button
              type="button"
              class="modal__form__submit"
              @click=${this.saveForm}
            >
              ${this.formSubmit}
            </button>
          </form>
        </dialog>
      </div>
    `}openModal(){this.modal.showModal();const t=document.querySelector(".page");t?t.classList.add("page--no-scroll"):document.body.classList.add("scroll:disabled"),document.body.addEventListener("keyup",this.boundHandleKeyUp),requestAnimationFrame(()=>{document.body.addEventListener("click",this.boundHandleClick)})}closeModal(){this.modal.close();const t=document.querySelector(".page");t?t.classList.remove("page--no-scroll"):document.body.classList.remove("scroll:disabled"),document.body.removeEventListener("keyup",this.boundHandleKeyUp),document.body.removeEventListener("click",this.boundHandleClick),window.location.hash===H&&window.history.pushState({},"",window.location.href.replace(window.location.hash,""))}handleClick(t){const o=this.modal.getBoundingClientRect(),i=t.clientX<o.x||t.clientX>o.x+o.width,a=t.clientY<o.y||t.clientY>o.y+o.height;(i||a)&&this.closeModal()}handleKeyUp(t){t.key==="Escape"&&this.closeModal()}saveForm(){const t=!!this.toggle.checked;localStorage.setItem(F,t?"true":"false"),document.documentElement.style.setProperty("cursor","wait"),t?window.location.reload():window.dataLayer&&window.dataLayer.push({event:"CPRA-off",eventLabel:this.analyticsEventLabel||"Waymo",eventCategory:"CPRA-off",eventAction:"CPRA-off",eventCallback:()=>{window.location.reload()},eventTimeout:1e3})}async loadTrackingScripts(){const t=document.querySelectorAll("[data-tracking-src]");for(const i of t){const a=i.cloneNode();a.src=i.dataset.trackingSrc,i.nodeName==="script"&&(a.type="application/javascript"),i.parentNode.insertBefore(a,i),await xe(a,"load")}document.querySelectorAll("script[data-tracking]").forEach(i=>{const a=document.createElement("script");a.type="application/javascript",a.text=i.text,i.parentNode.insertBefore(a,i)}),window.trackingLoaded=!0,window.dispatchEvent(new Event("tracking-loaded")),document.dispatchEvent(new Event("DOMContentLoaded"))}}customElements.define("w-no-tracking",Ee);const xe=(e,t)=>new Promise(o=>{const i=()=>{e.removeEventListener(t,i),o()};e.addEventListener(t,i)}),Se=window.location.hostname.includes("waymo.com"),s=!Se&&new URLSearchParams(window.location.search).has("debug"),R=()=>{Le(),Te()};window.trackingLoaded?R():window.addEventListener("tracking-loaded",R);const Le=()=>{window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","UA-62642502-1",{page_referrer:document.referrer.split("?")[0]}),e("config","AW-460810383"),["UA-62642502-1","AW-460810383","GTM-KKT9SD7"].forEach(t=>{const o=document.createElement("script");o.src=`https://www.googletagmanager.com/gtm.js?id=${t}`,o.async=!0;const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)})},Te=()=>{Ae(),Ce(),Me(),De(),Pe(),Oe(),$e(),Ne(),Fe()},Ae=()=>{const e=document.title,t=g(),o={event:"page_view",page_name:e,page_category:t};if(s?console.log(o):dataLayer.push(o),document.body?.dataset?.tracking){const a=JSON.parse(document.body.dataset.tracking);Array.isArray(a)?a.forEach(n=>{s?console.log(n):dataLayer.push(n)}):s?console.log(a):dataLayer.push(a)}},Ce=()=>{const e=document.querySelectorAll("body > header, #root > header, body > w-sticky-header, body > .header")[0];if(!e){console.warn("Failed to find global header element for analytics.");return}let t={event:"top_nav",page_name:document.title,page_category:g()};const o=i=>{s&&i.preventDefault();const a=i.target.closest("a");t.click_text=a.innerText,t.destination_url=a.href,t.section_title=Ie(a),a.dataset.tracking&&(t={...t,...JSON.parse(a.dataset.tracking)}),s?console.log(t):dataLayer.push(t)};e.querySelectorAll("a").forEach(i=>{i.addEventListener("click",o),i.addEventListener("auxclick",o)})},Me=()=>{const e=document.querySelectorAll("body > footer, #root > footer, body > w-footer, body > .footer")[0];if(!e){console.warn("Failed to find global footer element for analytics.");return}const t={event:"footer_nav",page_name:document.title,page_category:g(),section_title:"footer"},o=i=>{s&&i.preventDefault();const a=i.target.closest("a");t.click_text=a.innerText,t.destination_url=a.href,s?console.log(t):dataLayer.push(t)};e.querySelectorAll('nav a, .footer__nav a, w-link[slot="nav"]').forEach(i=>{i.addEventListener("click",o),i.addEventListener("auxclick",o)})},De=()=>{const e=document.querySelectorAll("body > footer, #root > footer, body > w-footer, body > .footer")[0];if(!e){console.warn("Failed to find global footer element for analytics.");return}const t={event:"social_clicks",page_name:document.title,page_category:g(),click_type:"Link Click"},o=i=>{s&&i.preventDefault();const a=i.target.closest("a");t.click_text=a.innerText,t.destination_url=a.href,s?console.log(t):dataLayer.push(t)};Array.from(e.querySelectorAll("a")).filter(i=>i.href.includes("facebook")||i.href.includes("twitter")||i.href.includes("linkedin")||i.href.includes("instagram")||i.href.includes("youtube")).forEach(i=>{i.addEventListener("click",o),i.addEventListener("auxclick",o)})},Pe=()=>{const e={event:"form_field",page_name:document.title,page_category:g()},t=o=>{s&&o.preventDefault();const i=o.target;e.field_name=i.placeholder?.length>1&&i.placeholder||i.closest("label")?.innerText||Array.from(i.parentElement.children).find(a=>a.nodeName==="LABEL")?.innerText||i.name,e.form_name=Array.from(i.closest("form")?.querySelectorAll("h1, h2, h3, h4, h5, h6"))?.at(0)?.innerText||Array.from(i.closest("section")?.querySelectorAll("h1, h2, h3, h4, h5, h6"))?.at(0)?.innerText,e.form_name&&(e.form_name=e.form_name.replace(`
`," ")),s?console.log(e):dataLayer.push(e)};Array.from(document.querySelectorAll("form input, form textarea, form select")).forEach(o=>{o.addEventListener("focus",t)})},Oe=()=>{document.querySelectorAll("form").forEach(e=>{let t={};t.event="total_form_submit",t.page_name=document.title,t.page_category=g(),e.dataset.tracking&&(t={...t,...JSON.parse(e.dataset.tracking)});const o=i=>{s&&i.preventDefault(),t.click_text=t.click_text||i.target.innerText,s?console.log(t):dataLayer.push(t)};e.addEventListener("submit",o),e.addEventListener("waymo-submit-success",o)})},$e=()=>{let e={};const t=o=>{s&&o.preventDefault();const i=o.target.closest("a")||o.target.closest("button"),a=i.href?.split("?")[0].replace(/\/$/,"").split("/").pop();e={event:i.tagName==="A"&&a&&a.includes("updates")?"newsletter_cta":"link_click",page_name:document.title,page_category:g(),section_title:"Main",click_type:i.tagName==="BUTTON"?"Button Click":"Link Click"},e.module_title=(i.closest("li")?.querySelector("h1, h2, h3, h4, h5, h6")||i.closest("section")?.querySelector("h1, h2, h3, h4, h5, h6"))?.innerText.replace(`
`," "),e.click_text=i.innerText,e.destination_url=i?.href,i.getAttribute("download")?e.click_type="Download Click":i.hasAttribute("aria-expanded")?e.click_type="Accordion Click":i.closest("w-modal")&&(e.click_type="Modal Button Click"),i.dataset.tracking&&(e={...e,...JSON.parse(i.dataset.tracking)}),s?console.log(e):dataLayer.push(e)};Array.from(document.querySelectorAll("main a, body > .header + section a, main w-link, button[data-tracking], footer a[data-tracking]")).forEach(o=>{o.addEventListener("click",t),o.addEventListener("auxclick",t)})},Ne=()=>{let e={};const t=o=>{s&&o.preventDefault();const i=o.target;e={event:"link_click",page_name:document.title,page_category:g(),section_title:"Main",click_type:"Drop down"},e.module_title=i.getAttribute("aria-label")||(i.closest("label")||i.id&&i.closest("section")?.querySelector(`label[for="${i.id}"]`))?.innerText?.replace(`
`," "),e.click_text=i.value,e.destination_url="",i.dataset.tracking&&(e={...e,...JSON.parse(link.dataset.tracking)}),s?console.log(e):dataLayer.push(e)};Array.from(document.querySelectorAll("select")).forEach(o=>{o.addEventListener("change",t)})},Fe=()=>{window.addEventListener("w-tracking",e=>{const t=e.detail;s?console.log(t):dataLayer.push(t)})},He={"":"Home","waymo-one":"Waymo One",sf:"Waymo One",phx:"Waymo One",la:"Waymo One",waitlist:"Waymo One",download:"Waymo One",careers:"Careers",company:"Company","first-responders":"Company",press:"Company",faq:"Company",privacy:"Company",contact:"Company",legal:"Company",updates:"Company","updates/confirmation":"Company",community:"Company","waymo-driver":"Technology",safety:"Technology",open:"Research",research:"Research"},Ie=e=>{const t=e.closest("li")?.querySelector("[data-nav-link-id]");return t?`header: ${t.innerText.trim()}`:"header"},g=()=>{const e=new URL(window.location).pathname.replace(/intl\/.+\//,"").slice(1).replace(/\/$/,"");return Re(e)?"Careers":qe(e)?"Research":Ue(e)?"Blog":He[e]},Re=e=>/^joinus\/.+/.test(e),qe=e=>/^research\/.+/.test(e),Ue=e=>/^blog/.test(e),Be=()=>{new URLSearchParams(window.location.search).has("hideLabels")&&document.body.classList.add("labels:hide")};function q(){window.youtubeModal||(window.youtubeModal=new re({namespace:"yt-modal",useHandlerOnMobile:!1,onModalClose:e=>{window.dispatchEvent(new CustomEvent("w-ytmodal-close",{detail:{modal:e}}))}})),Z(),Q(),Be(),de({ignores:/\/open\/.*/})}document.readyState!=="loading"?q():document.addEventListener("DOMContentLoaded",q);
