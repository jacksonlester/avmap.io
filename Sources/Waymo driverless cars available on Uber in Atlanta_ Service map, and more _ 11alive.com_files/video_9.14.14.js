define("video",["module","jquery","page","utils","hls","bem","tag","jquery-utils","live-messages"],function(e,B,M,j,t,x,O){"use strict";var z={name:e.id,class:"."+e.id};j.broadcast(z.name,"loaded");"Hls"in window&&"isSupported"in window.Hls||(window.Hls=t),j.createModuleNoJQ(z.name,function(d){const r=this,c=(this.el=d,this.module=z,new x(d,z.name)),i=document.getElementsByClassName(z.name).length,a=d.getElementsByClassName(z.name+"__player")[0],u=window.akamai.amp;let m={stream:d.dataset.stream,id:d.dataset.id,site:d.dataset.site,originalUrl:d.dataset.link,url:d.dataset.link,title:d.dataset.title,originalTitle:d.dataset.title,thumbnail:d.dataset.thumbnail,description:d.dataset.description,autoplay:"true"===d.dataset.autoplay,section:d.dataset.section,subsection:d.dataset.subsection,topic:d.dataset.topic,subtopic:d.dataset.subtopic,categories:d.dataset.categories,captions:d.dataset.captions,isLiveNow:d.dataset.isLiveNow,isUgc:d.dataset.isUgc,isCct:d.dataset.isCct,trackingTags:d.dataset.trackingTags,duration:d.dataset.duration,prerollDisabled:"true"===d.dataset.disablePreroll,hasAds:"true"===d.dataset.hasAds,videoMode:d.dataset.videoMode,iabCategoryId:{2.2:d.dataset["iabCategoryId-2.2"],"3.0":d.dataset["iabCategoryId-3.0"]},adDurationInSeconds:d.dataset.adDurationInSeconds,network:d.dataset.network,language:d.dataset.language,rating:d.dataset.rating,genre:d.dataset.genre},s=null,p=1,g=null,v=!0,n=(e="true"===d.dataset.mute,t=window.tegna.isRefresh,o=document.hidden,e||t&&o);var e,t,o;let l=null!==d.closest(".related-videos");u.DisplayState.NORMAL;function b(e,a){var i=!1;let s=0,n=!0;function t(){r.broadcast("timerRestarting"),clearTimeout(l),n=!0,l=null,i=!1,s=0,o=(new Date).getTime(),l=setTimeout(()=>{r.broadcast("timerFiring"),e(),t()},a)}r.broadcast("timerInit");var o=(new Date).getTime(),l=setTimeout(()=>{r.broadcast("timerFiring"),e(),t()},a);return{cancel:function(){r.broadcast("timerCancelling"),n=!1,clearTimeout(l)},pause:function(){var e,t;n&&(r.broadcast("timerPausing"),n=!1,clearTimeout(l),s=(e=o,t?t-e:(new Date).getTime()-e),i=s>=a)&&r.broadcast("timerComplete")},resume:function(){n||-1!==(l=i?-1:setTimeout(()=>{r.broadcast("timerFiring"),e(),t()},a-s))&&(n=!0,r.broadcast("timerResuming"))}}}this.init=function(){r.broadcast("init"),a.id="video-"+j.uuid(),C.updateVars(),w.setup(d.dataset.id,10),T.setup(),y(),R(I),D(),S(),E(),require(["comscore"]),r.broadcast("ready")};const y=()=>{var e=c.selectElements("modal-trigger").currentEl[0],t=c.selectElements("modal-close").currentEl[0];const a=c.selectElements("modal").currentEl[0];var i=c.selectElementsWithModifier("modal-app-link","type","ios").currentEl[0],s=c.selectElementsWithModifier("modal-app-link","type","android").currentEl[0];const n=e=>{r.broadcast(e),O.fire("ga4",{event:e,event_name_ga4:e,event_category_ga4:"module",event_label_ga4:"app_promo",content_type:M.model.pageType,section:M.model.section,subsection:M.model.subsection,topic:M.model.topic,subtopic:M.model.subtopic,video_included:M.model.hasVideo,original_headline:M.model.originalHeadline,page_url:window.location.href})};e.addEventListener("click",e=>{a.showModal(),n("display_app_promo")}),t.addEventListener("click",e=>{a.close(),n("close_app_promo")}),i.addEventListener("click",e=>{n("click_app_promo_store")}),s.addEventListener("click",e=>{n("click_app_promo_store")})},w={auto:0<parseInt(d.dataset.relatedAutoplayDelay),visible:!1,videos:[],unviewed:[],setup:(e,t,a)=>{fetch(`/ajax/content/relatedvideos/${e}/${t}/`+m.site).then(e=>e.json()).then(e=>{r.broadcast("receivedRelatedVideos",{relatedVideos:e}),w.videos=e,w.unviewed=e,w.update(),"function"==typeof a&&a(e)}),["top","right","bottom","left"].forEach(e=>{c.selectElements("animation_side_"+e).each(e=>{e.style.animationDuration=parseInt(d.dataset.relatedAutoplayDelay)+"s"})}),!1===w.auto&&c.selectElements("endslate-countdown").setModifier("visible","false"),c.selectElements("endslate-close-button").each(e=>{e.addEventListener("click",e=>{w.hide()})}),c.selectElements("endslate-link").each((e,t,a)=>{e.addEventListener("click",e=>{e.preventDefault(),w.play(a)}),e.style.cursor="pointer"}),B(document).keyup(function(e){d.contains(document.activeElement)&&("Escape"===e.key&&null===w.countdown.interval?w.hide():w.countdown.stop())})},update:()=>{if(!(w.unviewed.length<1)){const a=c.selectElements("endslate-item").currentEl;var e=c.selectElements("endslate-solo").currentEl[0],t=w.unviewed[0];w.unviewed.forEach((e,t)=>{void 0!==a[t]&&((t=a[t]).getElementsByClassName(z.name+"__endslate-title")[0].textContent=e.title,t.getElementsByClassName(z.name+"__endslate-link")[0].href=e.desktopUrl,t.getElementsByClassName(z.name+"__endslate-thumbnail")[0].src=j.dataCleanup.images.getSmallestImage(e.primaryImageUrl,e.primaryImageSizes).url,t.getElementsByClassName(z.name+"__endslate-thumbnail")[0].srcset=j.dataCleanup.images.getSrcSet(e.primaryImageUrl,e.primaryImageSizes))}),e.getElementsByClassName(z.name+"__endslate-solo-title")[0].textContent=t.title,e.getElementsByClassName(z.name+"__endslate-solo-link")[0].href=t.desktopUrl,e.getElementsByClassName(z.name+"__endslate-solo-thumbnail")[0].src=j.dataCleanup.images.getSmallestImage(t.primaryImageUrl,t.primaryImageSizes).url,e.getElementsByClassName(z.name+"__endslate-solo-thumbnail")[0].srcset=j.dataCleanup.images.getSrcSet(t.primaryImageUrl,t.primaryImageSizes),w.unviewed.length<5?(c.selectElements("endslate-list").setModifier("visible",!1),c.selectElements("endslate-solo").setModifier("visible",!0)):(c.selectElements("endslate-list").setModifier("visible",!0),c.selectElements("endslate-solo").setModifier("visible",!1))}},countdown:{interval:null,iteration:d.dataset.relatedAutoplayDelay,start:e=>{r.broadcast("countdownStart"),w.countdown.iteration=d.dataset.relatedAutoplayDelay,w.countdown.updateCounter(),c.selectElements("endslate-countdown").setModifier("visible","true"),w.countdown.restartProgressAnimation(),w.countdown.interval=window.setInterval(()=>{d.isConnected&&(1<w.countdown.iteration?w.countdown.iterate():(w.countdown.stop(),e()))},1e3)},stop:()=>{r.broadcast("countdownStop"),c.selectElements("endslate-countdown").setModifier("visible","false"),["top","right","bottom","left"].forEach(e=>{c.selectElements("animation_side_"+e).each(e=>{e.style.visibility="hidden"})}),null!==w.countdown.interval&&(window.clearInterval(w.countdown.interval),w.countdown.interval=null)},iterate:()=>{w.countdown.iteration--,w.countdown.updateCounter()},updateCounter:()=>{var e=c.selectElements("endslate-counter").currentEl[0],t=c.selectElements("endslate-counter").currentEl[1];e.textContent=w.countdown.iteration,t.textContent=w.countdown.iteration},restartProgressAnimation:()=>{["top","right","bottom","left"].forEach(t=>{c.selectElements("animation_side_"+t).each(e=>{e.style.visibility="visible",e.classList.remove(z.name+"__animation_side_"+t),e.offsetWidth,e.classList.add(z.name+"__animation_side_"+t)})})}},show:()=>{g.displayState===u.DisplayState.FULL_SCREEN?w.play(0):(w.visible=!0,w.auto&&w.countdown.start(()=>{w.play(0),w.countdown.iteration=d.dataset.relatedAutoplayDelay}),c.selectElements("endslate").setModifier("visible","true"),c.selectElements("endslate").currentEl[0].ariaHidden="false",c.selectElements("endslate").currentEl[0].style.visibility="visible",c.selectElements("player").currentEl[0].ariaHidden="true",window.setTimeout(()=>{c.selectElements("player").currentEl[0].style.visibility="hidden"},500),!d.contains(document.activeElement)&&document.activeElement!==document.body||c.selectElements("endslate-item").currentEl[0].getElementsByClassName(z.name+"__endslate-link")[0].focus())},hide:()=>{c.selectElements("endslate").currentEl[0].ariaHidden="true",c.selectElements("endslate").setModifier("visible","false"),c.selectElements("player").currentEl[0].ariaHidden="false",c.selectElements("player").currentEl[0].style.visibility="visible",window.setTimeout(()=>{c.selectElements("endslate").currentEl[0].style.visibility="hidden"},500),w.countdown.stop(),w.visible=!1},toggle:()=>{w.visible?w.hide():w.show()},play:e=>{const t=w.unviewed[e];m=h(t),w.hide(),_(m),w.unviewed=w.unviewed.filter(e=>e.id!==t.id),r.broadcast("updatedUnviewedList",{videos:w.videos,unviewed:w.unviewed}),0===w.unviewed.length&&(w.unviewed=w.videos,r.broadcast("replenishedUnviewedList",{videos:w.videos,unviewed:w.unviewed})),window.setTimeout(()=>{w.update()},500)}},E=()=>{j.listen("live-messages","elvsNewContent",(e,t,a)=>{var i,s,n,o,l;"true"===d.dataset.isWatchPlayer&&document.body.contains(d)&&(i=t=>{return a.iabData?a.iabData.find(e=>e.version===t)||{}:""},n={originalUrl:m.originalUrl,originalTitle:m.originalTitle,stream:m.stream,id:a.id,site:a.siteId,title:a.title,thumbnail:(s=c.selectElements("player-container").currentEl[0].getBoundingClientRect(),n=s.width*window.devicePixelRatio,s=s.height*window.devicePixelRatio,o=a.primaryImageUrl,l=a.primaryImageSizes,(0,j.dataCleanup.images.getBestImageBySize)(o,l,n,s).url),description:a.shortDescription,autoplay:a.autoplay,section:a.section,subsection:a.subsection,topic:a.topic,subtopic:a.subtopic,subtype:a.subtype,categories:a.categories.join(","),captions:m.captions,isLiveNow:(o="live_stream"===a.subsection,l="live_breaking"===a.subsection,"true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled?"24/7 Stream":o||l?"Live":"On Demand"),isUgc:a.isUgc&&"true"===a.isUgc.toString().toLowerCase()?"true":"false",isCct:"507"===a.siteId?"true":"false",trackingTags:Array.isArray(a.trackingTags)?a.trackingTags.join(","):a.trackingTags,duration:a.length,prerollDisabled:!0===a.disablePreroll,hasAds:null!==a.hasAds&&"true"===a.hasAds,videoMode:null!==a.videoMode?a.videoMode:"unknown",iabCategoryId:{2.2:i("2.2"),"3.0":i("3.0")},adDurationInSeconds:d.dataset.adDurationInSeconds,network:a.network,language:a.language,rating:a.rating,genre:a.genre},"true"===d.dataset.isWatchPlayer&&(n.moduleName="Live Stream Player Module","golivevideo"===a.subtype||"true"!==d.dataset.streamRestrictionEnabled?c.selectElements("modal-trigger").setModifier("enabled","false"):(c.selectElements("modal-trigger").setModifier("enabled","true"),g&&"pause"in g&&g.pause())),m=n,v&&C.trackEvent("mediaplay"),r.broadcast("formattedNewVideoDataFromElvs",n))})},h=e=>{const n=e=>e.replace("http://","https://").replace("https://","https://");var t,a,i,s=t=>{return e.iabData?e.iabData.find(e=>e.version===t)||{}:""},o={originalUrl:m.originalUrl,originalTitle:m.originalTitle,stream:function(){let t="",a=!1,i=!1,s=M.model.platform;return"mobile"!==s&&"amp"!==s||(s="mobile-web"),e.renditions.forEach(e=>{if(e.platform&&e.platform.toLowerCase()===s)return n(e.url);e.platform&&"legacy"===e.platform.toLowerCase()?(a=!0,t=n(e.url)):a||(e.format&&"hls"===e.format.toLowerCase()?(i=!0,t=n(e.url)):i||e.url&&e.url.toLowerCase().endsWith(".m3u8")&&(t=n(e.url)))}),t}(),id:e.id,site:e.siteId,title:e.title,thumbnail:(t=c.selectElements("player-container").currentEl[0].getBoundingClientRect(),o=t.width*window.devicePixelRatio,t=t.height*window.devicePixelRatio,a=e.primaryImageUrl,i=e.primaryImageSizes,(0,j.dataCleanup.images.getBestImageBySize)(a,i,o,t).url),description:e.shortDescription,autoplay:!0,section:e.section,subsection:e.subsection,topic:e.topic,subtopic:e.subtopic,categories:e.categories.join(","),captions:e.captions.vtt,isLiveNow:(a="live_stream"===e.subsection,i="live_breaking"===e.subsection,"true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled?"24/7 Stream":a||i?"Live":"On Demand"),isUgc:e.isUgc&&"true"===e.isUgc.toString().toLowerCase()?"true":"false",isCct:"507"===e.siteId?"true":"false",trackingTags:Array.isArray(e.trackingTags)?e.trackingTags.join(","):e.trackingTags,duration:e.length,prerollDisabled:!0===e.disablePreroll,hasAds:null!==e.hasAds&&"true"===e.hasAds,videoMode:null!==e.videoMode?e.videoMode:"unknown",iabCategoryId:{2.2:s("2.2"),"3.0":s("3.0")},adDurationInSeconds:d.dataset.adDurationInSeconds,network:e.network,language:e.language,rating:e.rating,genre:e.genre};return"true"===d.dataset.isWatchPlayer&&(o.moduleName="Live Stream Player Module"),r.broadcast("formattedNewVideoData",o),o},_=e=>{r.broadcast("playingNewVideo",e),Object.entries(e).forEach(e=>{var[e,t]=e;d.dataset[e]=t}),I=k(),"true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled||(L.state=0),L.timer&&L.timer.cancel(),L.timer=null,p++,R(I)},f=()=>{let e=!0;var t,a;return!m.prerollDisabled&&null===d.closest(".stream")&&(e=!(null===s&&(t=parseInt(m.duration),a=parseInt(d.dataset.disablePrerollAtDuration),"true"===m.isUgc.toLowerCase()&&(s=!0,e=!1),0<t)&&t<=a)&&e)},k=()=>{var e,t,a={paths:{player:"/assets/js-libs/akamai/amp/core/",plugins:"/assets/js-libs/akamai/amp/"},hls:{resources:[],enableWorker:!0,liveBackBufferLength:15,backBufferLength:15,liveMaxBackBufferLength:15,maxBufferSize:0,maxBufferLength:10},debug:!1,autoplay:m.autoplay&&"true"!==d.dataset.restrictedStream,muted:(e="true"===d.dataset.mute,a=window.tegna.isRefresh,t=document.hidden,e||a&&t),captioning:{crossorigin:"anonymous"},media:{src:m.stream,type:"application/x-mpegURL",poster:m.thumbnail,title:m.title,track:(e=[],null!==m.captions&&""!==m.captions?e.push({kind:"captions",type:"text/vtt",title:"English",name:"English",src:m.captions,srclang:"en"}):u.Utils.getIOSversion()&&e.push({kind:"captions",type:"text/cea-608",srclang:"eng"}),e),guid:m.id},settings:{defaults:{captions:{fontColor:"white",fontOpacity:"100%",edgeType:"rightShadow",edgeColor:"black",edgeOpacity:"50%",backgroundColor:"black",backgroundOpacity:"50%",windowColor:"black",windowOpacity:"50%"}}},plugins:{react:{mode:"none"},amazonbidder:{resources:[{src:"//c.amazon-adsystem.com/aax2/apstag.js",type:"text/javascript"},{src:"${paths.plugins}amazonbidder/Amazonbidder.js",debug:"${paths.plugins}amazonbidder/Amazonbidder.js",type:"text/javascript"}],pubID:parseInt(d.dataset.a9Pubid),adServer:"DFP",slots:[{slotID:"videoSlot_"+i,mediaType:"video"}]},ima:{resources:[{src:"//imasdk.googleapis.com/js/sdkloader/ima3.js",debug:"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js",type:"text/javascript",async:!0},{src:"${paths.plugins}ima/Ima.min.js",debug:"${paths.plugins}ima/Ima.js",type:"text/javascript",async:!0}],adTagUrl:{params:{env:"vp",gdfp_req:"1",impl:"s",output:"xml_vast3",vpmute:n?1:0,sz:"920x508",unviewed_position_start:"1",cmsid:"12768",url:window.location.href.split("#")[0],description_url:window.location.href.split("#")[0],vid:d.dataset.id,plcmt:null!==d.closest(".related-videos")?2:1,iu:j.joinIfSet("/",[M.model.dfpid,M.model.gptid,"pre_roll",m.section,m.subsection,m.topic]),cust_params:{topic_section:m.subtopic,cue:"pre",cgm:"0",frmt:"22",plID:"6918249996585",contentid:m.id,ttID:m.id,content_cat:m.iabCategoryId[2.2],right_rail_video:null!==d.closest(".related-videos")?"true":"false"}}}}}};return"Live"===m.isLiveNow||"24/7 Stream"===m.isLiveNow?a.media.temporalType="live":a.media.temporalType="vod",null!==d.closest(".live-video-banner__template-inner")&&(a.playsinline=!0,a.autoplayPolicy="muted",delete a.plugins.ima,delete a.plugins.prebid,delete a.plugins.amazonbidder),a.autoplay&&a.muted&&(a.playsinline=!0,a.autoplayPolicy="muted"),f()||(delete a.plugins.ima,delete a.plugins.prebid,delete a.plugins.amazonbidder),a};const C={vars:{},updateVars:()=>{C.vars={asset_id:m.id,content_categories:m.categories,content_title:m.title,video_name:m.title,content_type:"video",item_number:p,section:m.section||null,subsection:m.subsection||null,topic:m.topic||null,subtopic:m.subtopic||null,video_included:"true",video_related_play:("true"!==d.dataset.isWatchPlayer||"false"!==M.model.isElvsDisabled)&&1<p?"true":"false",cct_story:m.isCct,video_length:m.duration?j.formatSeconds(m.duration):null,video_length_secs:m.duration||null,tracking_tags:m.trackingTags,is_live:"true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled?"24/7 Stream":m.isLiveNow,page_url:window.location.href},d.closest("[data-analytics-name]")&&(C.vars.module_name=d.closest("[data-analytics-name]").dataset.analyticsName)},trackEvent:(e,t,a)=>{var i;g.displayState!==u.DisplayState.PICTURE_IN_PICTURE&&document.body.contains(d)&&(C.updateVars(),(i=JSON.parse(JSON.stringify(C.vars))).event=e,i.event_name_ga4=e,i.event_category_ga4=t||"video",i.event_label_ga4=a||C.vars.content_title,O.fire("ga4",i))},trackView:()=>{var e,t;document.body.contains(d)&&(C.updateVars(),e={type:"view"},(t=JSON.parse(JSON.stringify(C.vars))).event="page_view",t.event_name_ga4="page_view",O.fire(["ga4","oneplusx"],t,null,e))}};let I=k();const D=()=>{j.listen((e,t,a)=>{if(document.body.contains(d)&&e===z.name&&!Object.is(a.module,r))switch(t){case"docking":r.broadcast("received docking from another player"),g&&"pause"in g&&T.isDocked&&g.pause(),T.undock();break;case"play":case"adPlay":g&&"pause"in g&&g.pause(),T.undock()}})},S=()=>{j.listen("modal","showing",function(e,t,a){g&&"pause"in g&&document.body.contains(d)&&g.pause()}),j.listen("longform","playClicked",function(e,t,a){a.$video[0]===d&&document.body.contains(d)&&g.play()}),j.listen("longform","closeClicked",function(e,t,a){a.$video[0]===d&&document.body.contains(d)&&g.pause()})},L={timer:null,state:0,increment:6e4},T={isDocked:!1,hasBeenViewed:!1,dockerEl:d.getElementsByClassName(z.name+"__docker")[0],dockerContainerEl:d.getElementsByClassName(z.name+"__docker-container")[0],dockCloseButton:d.getElementsByClassName(z.name+"__docker-close")[0],dock:()=>{T.isDocked||(r.broadcast("docking",{module:r}),d.closest(".grid__content").style.zIndex="2",d.classList.add(z.name+"_docked_true"),d.classList.remove(z.name+"_docked_false"),T.dockerEl.classList.add(z.name+"__docker_state_docked"),T.dockCloseButton.classList.add(z.name+"__docker-close_visible_true"),T.isDocked=!0)},undock:()=>{T.isDocked&&(r.broadcast("undocking",{module:r}),d.closest(".grid__content").style.zIndex=null,d.classList.add(z.name+"_docked_false"),d.classList.remove(z.name+"_docked_true"),T.dockerEl.classList.remove(z.name+"__docker_state_docked"),T.dockCloseButton.classList.remove(z.name+"__docker-close_visible_true"),T.isDocked=!1)},setup:()=>{"desktop"===M.model.platform&&"true"===d.dataset.float?(j.observeIntersections(d,(e,t)=>{e.isIntersecting?(T.hasBeenViewed=!0,T.undock()):T.hasBeenViewed&&T.dock()}),T.dockCloseButton.addEventListener("click",e=>{T.undock(),g&&g.pause()})):j.observeIntersections(d,(e,t)=>{e.isIntersecting?T.hasBeenViewed=!0:g&&g.pause()})}},P={CLICKED:function(e){r.broadcast("adClicked")},COMPANION:function(e){r.broadcast("adCompanionProcessed")},CONTAINER_CREATED:function(e){r.broadcast("adContainerCreated")},DURATION_CHANGE:function(e){r.broadcast("adDurationChanged")},ENDED:function(e){C.trackEvent("ad_complete")},ERROR:function(e){r.broadcast("adError")},LOADED:function(e){r.broadcast("adLoaded")},MANAGER_LOADED:function(e){r.broadcast("adManagerLoaded")},PAUSE:function(e){v=!1,r.broadcast("adPause")},PLAY:function(e){v=!0,r.broadcast("adPlay",{videoData:m,module:r})},RESUME:function(e){v=!0,r.broadcast("adResume")},STARTED:function(e){v=!0,C.trackEvent("ad_start")},TIME_REMAINING:function(e){},TIME_UPDATE:function(e){},SKIPPED:function(e){C.trackEvent("ad_skip")}},A={PLAY:function(e){r.broadcast("play",{videoData:m,module:r}),null!==L.timer&&g.displayState!==u.DisplayState.PICTURE_IN_PICTURE&&L.timer.resume(),v=!0},PAUSE:function(e){g.playState===u.PlayState.PLAYING&&(v=!1),null!==L.timer&&L.timer.pause()},RESUME:function(){v=!0},ENDED:function(e){null!==L.timer&&L.timer.pause(),0<w.unviewed.length&&w.show()},DISPLAY_STATE_CHANGE:function(e){r.broadcast("displayStateChange",{old:e.data.previous,new:e.data.value}),e.data.previous===u.DisplayState.PICTURE_IN_PICTURE?g.playState===u.PlayState.PLAYING&&null!==L.timer&&L.timer.resume():e.data.value===u.DisplayState.PICTURE_IN_PICTURE&&null!==L.timer&&L.timer.pause()},MUTE_CHANGE:function(e){n=!1!==e.data||(C.trackEvent("unmute"),!1)},STARTED:function(e){v=!0,C.trackEvent("mediaplay"),null===L.timer?L.timer=new b(()=>{document.body.contains(d)&&(L.state++,C.trackEvent("duration","video",L.state),r.broadcast("duration",{minutes:L.state}),!l||l&&!n)&&"refreshTimer"in M&&"reset"in M.refreshTimer&&M.refreshTimer.reset()},L.increment):L.timer.resume()},AUTOPLAY_BLOCKED:function(e){r.broadcast("autoplayBlocked")}},U=(e,t)=>{let a=e;e=e=>encodeURIComponent(encodeURIComponent(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"));"news"===m.section&&m.subsection,"news"===m.section&&m.subsection;return null===t&&(t=""),("true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled||m.hasAds&&("vod"===m.videoMode||"live"===m.videoMode))&&(a.includes("?")?a+="&":a+="?",a+=j.assembleQueryString({"ads.ad_duration":"vod"===m.videoMode?m.adDurationInSeconds:null,"ads.channel":M.model.callLetters,"ads.category":m.iabCategoryId[2.2],"ads.content_id":m.id,"ads.language":m.language,"ads.length":m.duration||null,"ads.network":m.network,"ads.genre":m.section,"ads.gpp":window.tegna.getCookie("OTGPPConsent"),"ads.livestream":"24/7 Stream"===m.isLiveNow||"Live"===m.isLiveNow?1:0,"ads.p_uid":t,"ads.page_url":e(`https://www.${M.model.primarydomain}/`),"ads.player_height":Math.round(d.getBoundingClientRect().height),"ads.player_width":Math.round(d.getBoundingClientRect().width),"ads.rating":"NR","ads.site_name":e(M.model.callLetters),"ads.site_page":e(`https://www.${M.model.primarydomain}/`),"ads.src_page_url":e(window.location.href),"ads.title":e(m.title),"ads.ua":e(navigator.userAgent),"ads.us_privacy":j.getCookie("usprivacy"),"ads.video_plcmt":null!==d.closest(".related-videos")?2:1,"ads.site_id":function(){switch(m.videoMode){case"vod":return d.dataset.publicaVodId;case"live":return d.dataset.publicaLiveId;case"unknown":return"true"===d.dataset.isWatchPlayer?d.dataset.publicaLiveId:d.dataset.publicaVodId}return null}()},!1,!0,!0)),a},N={embed:()=>{var e={width:640,height:360,style:"border:1px solid #e6e6e6",src:`${M.model.environmentBaseUrl}embeds/video/responsive/${d.dataset.site}-${m.id}/iframe`,allowfullscreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0},e=`<iframe ${j.assembleHtmlAttributes(e)}></iframe>`;r.broadcast("sharingEmbed",{details:e}),window.navigator.clipboard.writeText(e).then(e=>{r.broadcast("sharedEmbed");var t=document.createElement("tegna-alert"),a=document.createTextNode("Embed code copied to clipboard");t.appendChild(a),document.body.appendChild(t)})},email:()=>{"true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled?window.location.href="mailto:?body=Watch%20Live%0D%0A%0D%0A"+encodeURIComponent(M.model.environmentBaseUrl+"watch"):window.location.href=`mailto:?body=${encodeURIComponent(m.originalTitle)}%0D%0A%0D%0A`+encodeURIComponent(m.originalUrl)},facebook:()=>{"true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled?window.open(`https://www.facebook.com/dialog/share?app_id=${d.dataset.facebookAppId}&display=popup&href=${encodeURIComponent(M.model.environmentBaseUrl+"watch")}&redirect_uri=`+encodeURIComponent(M.model.environmentBaseUrl+"watch"),"_blank"):window.open(`https://www.facebook.com/dialog/share?app_id=${d.dataset.facebookAppId}&display=popup&href=${encodeURIComponent(m.originalUrl)}&redirect_uri=`+encodeURIComponent(m.originalUrl),"_blank")}},R=s=>{const n=()=>{if(1<p)r.broadcast("playingNewVideo",{el:d,videoData:m}),g.setAutoplay(!0),g.setMedia(s.media);else{r.broadcast("creatingPlayer",{playerEl:a,settings:s}),"Hls"in window&&"isSupported"in window.Hls?r.broadcast("hlsReady"):r.broadcast("hlsNotReady"),u.AMP.create(a,s,e=>{r.broadcast("createdPlayer",{playerEl:a,player:e.player}),(g=e.player).addEventListener("started",e=>{g.react.mode="auto"}),g.addEventListener("share",function(e){N[e.detail.provider.id]()}),Object.entries(P).forEach(e=>{var[e,t]=e;g.ads.addEventListener(u.AdEvents[e],t)}),Object.entries(A).forEach(e=>{var[e,t]=e;g.addEventListener(u.Events[e],t)})});const t=new MutationObserver(function(e){e.forEach(function(e){e.removedNodes.forEach(function(e){e&&e.dataset&&"video"===e.dataset.module&&(r.broadcast("removed"),g&&"destroy"in g&&g.destroy(),t.disconnect())})})});t.observe(d.parentElement,{subtree:!1,childList:!0})}};var e;"news"===m.section&&m.subsection,"news"===m.section&&m.subsection;if("true"===d.dataset.isWatchPlayer&&"false"===M.model.isElvsDisabled||m.hasAds&&("vod"===m.videoMode||"live"===m.videoMode)){let t=!1;{var o=e=>{t||(t=!0,s.media.src=U(s.media.src,e),n())};const l="video__publicaSsaiScript";let a=!1,i=Date.now();document.getElementById(l)?(e=document.getElementById(l).dataset.uid)?(a=!0,r.broadcast("readingPublica"),o(e)):document.getElementById(l).addEventListener("received",e=>{a=!0,r.broadcast("readingPublica"),o(document.getElementById(l).dataset.uid)}):(window.publicaConfig={publicaUserSyncCallback:e=>{document.getElementById(l).dataset.uid=e;var t=new Event("received");document.getElementById(l).dispatchEvent(t),a=!0,r.broadcast("publicaReceived",{userId:e,time:Date.now()-i}),o(e)},enableUserSync:!0},(e=document.createElement("script")).id=l,e.src="//sync.publica-ctv.com/ssai-sync.js",e.async=!0,r.broadcast("addingPublicaSSAI"),document.body.appendChild(e)),window.setTimeout(()=>{a||(r.broadcast("publicaTimedOut"),o(null))},5e3)}}else n()}})});
//# sourceMappingURL=video_9.14.14.js.map