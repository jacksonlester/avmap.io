define("live-video-banner",["module","bem","page","utils","storage","tag"],function(e,c,r,d,t,m){"use strict";var p={name:e.id,class:"."+e.id};d.broadcast(p.name,"loaded"),d.createModuleNoJQ(p.name,function(o){const a=this,l=new c(o,p.name);let i="true"===o.dataset.streamRestricted;this.el=o,this.module=p;const t={closeEl:l.selectElements("blocker-close").currentEl[0],modalEl:l.selectElements("blocker").currentEl[0],iosEl:l.selectElementsWithModifier("blocker-app-link","type","ios").currentEl[0],androidEl:l.selectElementsWithModifier("blocker-app-link","type","android").currentEl[0],track:e=>{var t={event:e,event_name_ga4:e,event_category_ga4:"module",event_label_ga4:"app_promo",content_type:r.model.pageType,section:r.model.section,subsection:r.model.subsection,topic:r.model.topic,subtopic:r.model.subtopic,video_included:r.model.hasVideo,original_headline:r.model.originalHeadline,page_url:window.location.href};a.broadcast(e,t),m.fire("ga4",t)},show:()=>{t.modalEl.showModal(),t.track("display_app_promo")},close:()=>{t.modalEl.close(),t.track("close_app_promo")},init:()=>{t.closeEl.addEventListener("click",()=>{t.close()}),t.iosEl.addEventListener("click",()=>{t.track("click_app_promo_store")}),t.androidEl.addEventListener("click",()=>{t.track("click_app_promo_store")})}},n=(this.init=function(){a.broadcast("init"),a.broadcast(i?"streamBlocked":"streamAllowed"),d.listen("live-messages","elvsNewContent",function(e,t,l){s(l.title),"golivevideo"===l.subtype||"true"!==o.dataset.restrictionEnabled?(i=!1,a.broadcast("streamAllowed")):(i=!0,a.broadcast("streamBlocked"))}),d.listen("mini-live-video","started",function(e,t,l){s(l.title)}),l.selectElements("close").each(e=>{e.addEventListener("click",()=>{o.remove()}),e.disabled=!1}),l.selectElements("video-link").each(e=>{e.addEventListener("click",e=>{e.preventDefault(),n()})}),l.selectElements("meta").each(e=>{e.addEventListener("click",e=>{e.preventDefault(),n()})}),t.init(),a.broadcast("ready")},()=>{var e;i?t.show():(e=l.selectElements("template").currentEl[0])&&(window.modal.create(e),e.content.querySelector("[data-module=video]").dataset)}),s=e=>{let t=e;100<t.length&&(t=t.substring(0,100)+"â€¦"),l.selectElements("title").currentEl[0].textContent=t}})});
//# sourceMappingURL=live-video-banner_9.14.14.js.map