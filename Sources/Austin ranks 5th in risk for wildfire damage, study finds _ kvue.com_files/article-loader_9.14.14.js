define("article-loader",["module","jquery","page","utils","storage","jquery-utils"],function(t,d,s,a,l){const u={name:t.id,class:"."+t.id};a.broadcast(u.name,"loaded"),a.createModule(u.name,function(e){const n=this,t=(n.$el=e,n.module=u,n.init=function(){var a;n.broadcast("init"),"true"!==s.model.isPreview&&(a=n.getElements("button"),o&&i<t?a.text("Loading next article...").prop("disabled",!0).show().observeIntersections((t,e)=>{t.isIntersecting&&(e.unobserve(t.target),r(function(t){t?(n.broadcast("nextArticleReceived",{sectionHtml:t}),a.hide(),c(d(t).find(".grid__section_behavior_static"))):(a.text("Unable to load next article"),n.broadcast("nextArticleFailed"))}))},{rootMargin:"500px 0px 500px 0px"}):r(function(t){var e,i;t?(i=(e=d(t).find(".grid__section")).find(".article").attr("data-title"),e.each(function(){n.broadcast("nextArticleReceived",{sectionHtml:t})}),a.addClass("article__next_manual_true").html("<strong>Up next: </strong>"+i).show().on("click",function(){a.hide(),c(d(t).find(".grid__section_behavior_static"))})):n.broadcast("nextArticleFailed")})),n.broadcast("ready")},5);var i=e.closest(".grid").find(".article").length;const o="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;function r(e){var t=d(".article"),t={provider:"database",originalId:t.first()[0].dataset.articleId,currentId:l.get("viewedArticles").join(","),section:t.first()[0].dataset.section,subsection:t.first()[0].dataset.subsection,topic:t.first()[0].dataset.topic,subtopic:t.first()[0].dataset.subtopic,articleNumber:t.length,siteId:s.model.siteid,platform:"mobile"===s.model.platform?"mobile_web":s.model.platform,pageUrl:s.model.targetingUrl},i=document.querySelector('[name="__RequestVerificationToken"]').value;d.ajax({url:"/ajax/content/cscroll",method:"POST",dataType:"text",contentType:"application/json",headers:{"XSRF-TOKEN":i},data:JSON.stringify(t)}).done(function(t){e(t)}).fail(function(){e(null)}),n.broadcast("requestingNextArticle",t)}function c(t){window.COMSCORE&&window.COMSCORE.beacon&&a.broadcast(u.name,"comscoreBeacon",{comscoreId:s.model.comscoreid}),n.broadcast("showingNextArticle",{articleHtml:t}),t.each(function(){var t=d(this),i=d(".article").length+1;t.find('[id*="::articleNumber::"]').each(function(){var t=d(this).attr("id"),e=t.replace("::articleNumber::",i);d(this).attr("id",e),n.broadcast("updatedId",{old:t,new:e})}),e.closest(".grid").append(t),a.broadcast("grid","addedSection",{$el:t,el:t[0]})})}})});
//# sourceMappingURL=article-loader_9.14.14.js.map