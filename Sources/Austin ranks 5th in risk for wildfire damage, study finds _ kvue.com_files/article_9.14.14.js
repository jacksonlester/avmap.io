define("article",["module","jquery","page","utils","storage","tag","header","jquery-utils"],function(e,c,l,_,u,g){const b={name:e.id,class:"."+e.id};_.broadcast(b.name,"loaded"),_.createModule(b.name,function(a){const i=this,s=(i.$el=a,i.module=b,i.init=function(){var e,t;i.broadcast("init"),"true"!==l.model.isPreview&&(e=0===document.referrer.indexOf(document.location.protocol+"//"+document.location.host),t=document.referrer.replace(/\/$/,"")===document.location.href.replace(/\/$/,""),e?t?(i.broadcast("selfReferrer",{referrer:document.referrer,host:document.location.protocol+"//"+document.location.host}),l.nonRefreshedReferrer&&(i.getElements("close")[0].href=l.nonRefreshedReferrer)):(i.broadcast("localReferrer",{referrer:document.referrer,host:document.location.protocol+"//"+document.location.host}),i.getElements("close")[0].href=document.referrer):i.broadcast("externalReferrer",{referrer:document.referrer,host:document.location.protocol+"//"+document.location.host})),r(),"true"===a[0].dataset.adhesionEnabled&&s.init(),i.getElements("close")[0].addEventListener("click",e=>{g.fire("ga4",{event:"close_article",event_name_ga4:"close_article",event_category_ga4:"article",event_label_ga4:a[0].dataset.title,asset_id:a[0].dataset.articleId,article_byline:a[0].dataset.author,content_categories:a[0].dataset.categories,content_title:a[0].dataset.title,content_type:"article",item_number:c(".article").length,section:a[0].dataset.section,subsection:a[0].dataset.subsection,topic:a[0].dataset.topic,subtopic:a[0].dataset.subtopic,video_included:a[0].dataset.hasVideo,cct_story:a[0].dataset.isCct,original_headline:a[0].dataset.originalHeadline,content_score:a[0].dataset.contentScore,tracking_tags:a[0].dataset.trackingTags,page_url:window.location.href,contains_ai:a[0].dataset.containsAi,ai_headline:a[0].dataset.aiHeadline,ai_abstract:a[0].dataset.aiAbstract,ai_seo_headline:a[0].dataset.aiSeoHeadline,ai_seo_abstract:a[0].dataset.aiSeoAbstract,ai_fb_headline:a[0].dataset.aiFbHeadline,ai_fb_abstract:a[0].dataset.aiFbAbstract})}),i.getElements("category")[0].addEventListener("click",e=>{g.fire("ga4",{event:"click_article_topic",event_name_ga4:"click_article_topic",event_category_ga4:"topic",event_label_ga4:e.target.textContent,asset_id:a[0].dataset.articleId,article_byline:a[0].dataset.author,content_categories:a[0].dataset.categories,content_title:a[0].dataset.title,content_type:"article",item_number:c(".article").length,section:a[0].dataset.section,subsection:a[0].dataset.subsection,topic:a[0].dataset.topic,subtopic:a[0].dataset.subtopic,video_included:a[0].dataset.hasVideo,cct_story:a[0].dataset.isCct,original_headline:a[0].dataset.originalHeadline,content_score:a[0].dataset.contentScore,tracking_tags:a[0].dataset.trackingTags,page_url:window.location.href,contains_ai:a[0].dataset.containsAi,ai_headline:a[0].dataset.aiHeadline,ai_abstract:a[0].dataset.aiAbstract,ai_seo_headline:a[0].dataset.aiSeoHeadline,ai_seo_abstract:a[0].dataset.aiSeoAbstract,ai_fb_headline:a[0].dataset.aiFbHeadline,ai_fb_abstract:a[0].dataset.aiFbAbstract})}),a.observeIntersections((e,t)=>{!0===e.isIntersecting?(e=n.seoTitle+" | "+l.model.primarydomain,document.title=e,o?(e={event:"page_view",event_name_ga4:"page_view",asset_id:a[0].dataset.articleId,site_id:l.model.siteId,watson_keywords:a[0].dataset.watsonKeywords,article_byline:a[0].dataset.author,content_categories:a[0].dataset.categories,content_title:a[0].dataset.title,content_type:"article",item_number:c(".article").length,section:a[0].dataset.section,subsection:a[0].dataset.subsection,topic:a[0].dataset.topic,subtopic:a[0].dataset.subtopic,video_included:a[0].dataset.hasVideo,cct_story:a[0].dataset.isCct,original_headline:a[0].dataset.originalHeadline,content_score:a[0].dataset.contentScore,tracking_tags:a[0].dataset.trackingTags,event_category_ga4:"view",event_label_ga4:e,contains_ai:a[0].dataset.containsAi,ai_headline:a[0].dataset.aiHeadline,ai_abstract:a[0].dataset.aiAbstract,ai_seo_headline:a[0].dataset.aiSeoHeadline,ai_seo_abstract:a[0].dataset.aiSeoAbstract,ai_fb_headline:a[0].dataset.aiFbHeadline,ai_fb_abstract:a[0].dataset.aiFbAbstract},g.fire(["ga4","oneplusx"],e),i.broadcast("enteredViewport",{dataset:n}),o=!1):i.broadcast("enteredViewport",{dataset:n}),i.broadcast("gainedFocus"),i.focused=!0):i.broadcast("leftViewport")}),_.listen(b.name,"enteredViewport",function(e,t,a){!1===d(a.$el)&&i.broadcast("lostFocus")}),i.broadcast("ready")},{getOuter:()=>i.getElements("adhesion"),getInner:()=>i.getElements("adhesion-inner"),init:()=>{i.broadcast("adhesionInit"),document.addEventListener("scroll",s.update),window.addEventListener("resize",s.update,!0),_.listen("_gpt","slotRenderEnded",function(e,t,a){"article_universal"===a.$el[0].parentNode.dataset.position&&!1===a.response.isEmpty&&window.setTimeout(()=>{s.update("universalAdLoaded")},250)}),i.getElements("adhesion-close")[0].addEventListener("click",e=>{s.remove()})},update:()=>{var e=document.getElementsByClassName("universal-ad")[0].getBoundingClientRect().bottom;0<e&&(s.getOuter()[0].getBoundingClientRect().top-e<500?(s.getInner().setModifier("hidden","true"),i.broadcast("adhesionHidden")):(s.getInner().setModifier("hidden","false"),i.broadcast("adhesionUnhidden")))},remove:()=>{s.getInner().setModifier("closed","true"),window.setTimeout(()=>{s.getInner()[0].remove(),i.broadcast("adhesionRemoved")},500)}}),n=a[0].dataset;let o=1<c(".article").length;const d=e=>e.is(a),r=()=>{var e=u.get("viewedArticles")||[],t=a[0].dataset.articleId;e.pushIfUnique(t,30),u.set("viewedArticles",e)}})});
//# sourceMappingURL=article_9.14.14.js.map