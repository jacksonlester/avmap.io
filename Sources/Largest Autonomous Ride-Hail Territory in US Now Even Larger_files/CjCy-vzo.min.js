import{d as l}from"./chunks/C6NDGylb.min.js";import{g as n,s as r,t as c}from"./chunks/h7bW5co3.min.js";import{i as u,a as d}from"./chunks/0wbrCakR.min.js";class b extends HTMLElement{constructor(){super(...arguments),this.previousScrollTop=window.pageYOffset||document.documentElement.scrollTop,this.debouncedOnScroll=l(this.onScroll.bind(this),100),this.debouncedOnResize=l(this.onResize.bind(this),100)}connectedCallback(){this.mobileMenu=this.querySelector("[data-main-nav]"),this.mobileSubmenus=Array.from(this.querySelectorAll("[data-nav-link-id]")),this.mobileSearchButton=this.querySelector("[data-mobile-search]"),window.addEventListener("scroll",this.debouncedOnScroll,{passive:!0}),this.onScroll(),u()?(this.isDesktopViewport=!1,this.setUpMobileMenu(),this.setUpMobileSubmenus()):(this.isDesktopViewport=!0,this.setUpDesktopHoverEffects()),window.addEventListener("resize",this.debouncedOnResize)}disconnectedCallback(){window.removeEventListener("scroll",this.debouncedOnScroll),window.removeEventListener("resize",this.debouncedOnResize)}onResize(){const s=this.isDesktopViewport,e=d();s&&!e?(this.isDesktopViewport=!1,this.setUpMobileMenu(),this.setUpMobileSubmenus()):!s&&e&&(this.isDesktopViewport=!0,this.setUpDesktopHoverEffects())}onScroll(){const s=window.scrollY<=10;document.body.classList.toggle("scroll:top",s),document.body.classList.toggle("scroll:belowTop",!s);const e=window.pageYOffset||document.documentElement.scrollTop,t=e>this.previousScrollTop;document.body.classList.toggle("scroll:down",t);const i=e<this.previousScrollTop;document.body.classList.toggle("scroll:up",i),this.previousScrollTop=e<=0?0:e,t&&this.deactivateInfoPanels()}setUpMobileMenu(){this.hamburger||(this.hamburger=document.getElementById("hamburger-menu"),this.hamburger.addEventListener("click",()=>{document.body.classList.contains("menu:search")?(document.body.classList.remove("scroll:disabled"),document.body.classList.remove("menu:search"),this.hamburger.setAttribute("aria-expanded","false")):this.toggleMobileMenu()})),this.mobileMenu?.setAttribute("aria-hidden","true"),this.mobileMenuInteractables=Array.from(this.querySelectorAll("a[data-nav-link-id], a[data-nav-link-id] ~ button[data-submenu-id]")),this.mobileMenuInteractables?.forEach(s=>{s.tabIndex=-1}),this.mobileSearchButton&&this.mobileSearchButton.addEventListener("click",()=>{document.body.classList.remove("menu:open"),document.body.classList.add("scroll:disabled"),document.body.classList.add("menu:search"),this.hamburger.setAttribute("aria-expanded","true")})}setUpMobileSubmenus(){this.submenuButtons||(this.submenuButtons=Array.from(this.querySelectorAll("button[data-submenu-id]")),this.submenuButtons.forEach(s=>{const e=s;e.addEventListener("click",()=>this.toggleMobileSubmenu(e))})),this.mobileSubmenus.forEach(s=>{s.setAttribute("aria-hidden","true"),n(s).forEach(e=>{e.tabIndex=-1})})}deactivateInfoPanels(){this.activeInfoPanel?.classList.remove("details:active"),this.activeInfoPanel=null,d()&&(document.body.classList.remove("menu:open"),document.body.classList.remove("menu:search"))}setUpDesktopHoverEffects(){const s=t=>{const i=parseInt(t.dataset.navLinkId);this.activeInfoPanel?.classList.remove("details:active"),this.activeInfoPanel=this.querySelector(`div[data-nav-panel-id="${i}"]`),this.activeInfoPanel?.classList.add("details:active"),"navLinkEmpty"in t.dataset?document.body.classList.remove("menu:open"):document.body.classList.add("menu:open"),"search"in t.dataset?document.body.classList.add("menu:search"):document.body.classList.remove("menu:search"),t.parentElement.addEventListener("focusout",o=>{const a=o.relatedTarget;this.contains(a)||this.deactivateInfoPanels()},{once:!0})};this.addEventListener("w-safe-triangle-hover-on",t=>{const i=t.target.querySelector("button, a");s(i)}),this.addEventListener("w-safe-triangle-hover-off",()=>{this.deactivateInfoPanels()});const e=this.querySelectorAll("[data-nav-link-id]");e.forEach(t=>{this.addEventListener("focusin",i=>{const o=i.target;t.parentElement.contains(o)&&(document.body.classList.remove("scroll:down"),document.body.classList.add("scroll:up"),s(t))})}),e.forEach(t=>{t.tabIndex=0}),this.mobileMenu?.setAttribute("aria-hidden","false"),this.mobileSubmenus?.forEach(t=>{t.setAttribute("aria-hidden","false"),n(t).forEach(i=>{i.tabIndex=0})})}toggleMobileMenu(s){let e;if(s===void 0?e=document.body.classList.contains("menu:open"):e=!s,document.body.classList.toggle("menu:open",!e),this.hamburger&&this.hamburger.setAttribute("aria-expanded",e?"false":"true"),e?window.addEventListener("scroll",this.debouncedOnScroll):window.removeEventListener("scroll",this.debouncedOnScroll),document.body.classList.toggle("scroll:disabled",!e),this.mobileMenu.setAttribute("aria-hidden",e?"true":"false"),this.mobileMenuInteractables?.forEach(t=>{t.tabIndex=e?-1:0}),e?(this.closeMobileSubmenus(),r(this.mobileMenu)):c(this.mobileMenu,this.mobileMenuInteractables),!e){const t=i=>{i.key==="Escape"&&(this.toggleMobileMenu(!1),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t)}}toggleMobileSubmenu(s){const e=s.getAttribute("aria-expanded")==="true";s.setAttribute("aria-expanded",e?"false":"true");const t=document.getElementById(s.getAttribute("aria-controls"));t.setAttribute("aria-hidden",e?"true":"false"),t.classList.toggle("submenu:open",!e),this.classList.toggle("submenu:open",!e),Array.from(this.querySelectorAll(`button[data-submenu-id="${s.dataset.submenuId}"]`)).filter(o=>o!==s)[0].setAttribute("aria-expanded",e?"false":"true"),this.mobileSubmenus.forEach(o=>{n(o).forEach(a=>{a.tabIndex=-1})}),e?r(t):(n(t).forEach(o=>{o.tabIndex=0}),c(t))}closeMobileSubmenus(){this.classList.contains("submenu:open")&&this.submenuButtons.forEach(e=>{const t=e;t.getAttribute("aria-expanded")==="true"&&this.toggleMobileSubmenu(t)})}}customElements.get("w-header")||customElements.define("w-header",b);
